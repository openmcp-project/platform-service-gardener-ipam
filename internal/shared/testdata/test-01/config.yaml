apiVersion: gardener.clusters.openmcp.cloud/v1alpha1
kind: IPAMConfig
metadata:
  name: ipam
spec:
  parentCIDRs:
    foo:
    - 10.0.0.0/16
    bar:
    - 12.0.0.0/16
  injectionRules:
  - id: rule1
    injections:
    - path: spec.networking.pods
      parents:
      - foo
      subnetSize: 24
    matchPurposes:
    - operator: ContainsAny
      values:
      - test-0
      - test-1
    - operator: ContainsNone
      values:
      - nope
    matchLabels:
      openmcp.cloud/test: "true"
  - id: rule2
    injections:
    - path: spec.networking.services
      parents:
      - bar
      subnetSize: 24
    matchPurposes:
    - operator: ContainsAny
      values:
      - test-2
